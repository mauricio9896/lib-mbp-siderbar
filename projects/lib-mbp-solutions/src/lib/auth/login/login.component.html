<section class="login-card" [class.is-loading]="loading()">
  <header class="login-header">
    <h2 class="login-title">{{ title() }}</h2>
    @if (subtitle()) {
      <p class="login-subtitle">{{ subtitle() }}</p>
    }
  </header>

  @if (error()) {
    <div class="login-error" role="alert" aria-live="polite">
      {{ error() }}
    </div>
  }

  <form class="login-form" (submit)="onSubmit($event)" novalidate>
    <label class="login-label" for="login-username">Email</label>
    <input
      id="login-username"
      class="login-input"
      type="email"
      autocomplete="username"
      required
      [value]="username()"
      (input)="onUsernameInput($event)"
    />

    <label class="login-label" for="login-password">Password</label>
    <div class="login-input-wrapper">
      <input
        id="login-password"
        class="login-input"
        [type]="showPassword() ? 'text' : 'password'"
        autocomplete="current-password"
        required
        [value]="password()"
        (input)="onPasswordInput($event)"
      />
      <button
        class="login-toggle"
        type="button"
        [attr.aria-pressed]="showPassword()"
        [attr.aria-label]="showPassword() ? 'Hide password' : 'Show password'"
        (mousedown)="showPasswordOn()"
        (mouseup)="showPasswordOff()"
        (mouseleave)="showPasswordOff()"
        (touchstart)="showPasswordOn()"
        (touchend)="showPasswordOff()"
        (touchcancel)="showPasswordOff()"
      >
        <mat-icon aria-hidden="true">
          {{ showPassword() ? 'visibility_off' : 'visibility' }}
        </mat-icon>
      </button>
    </div>

    <button class="login-submit" type="submit" [disabled]="!canSubmit()">
      @if (loading()) {
        <span class="login-spinner" aria-hidden="true"></span>
      }
      <span class="login-submit-text">
        {{ loading() ? 'Signing in...' : 'Sign in' }}
      </span>
    </button>
  </form>
</section>
